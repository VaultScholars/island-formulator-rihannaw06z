<div class="w-full">
  <div class="flex justify-between items-center mb-8">
    <h1 class="font-bold text-4xl text-gray-900 mt-5">Welcome back, <%= current_user.email_address.split('@').first.capitalize %>!</h1>
    <div class="text-sm text-gray-800 mr-2 font-bold">
      <%= Time.now.strftime("%A, %B %d, %Y") %>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-16">
      <div class="p-4 rounded-xl bg-black/70 backdrop-blur-xl border border-black/10 border-l-4 border-blue-400/60 shadow-lg shadow-black/20">
        <p class="text-xs uppercase text-blue-200 font-semibold">Ingredients</p>
        <p class="text-3xl font-bold text-white"><%= @stats[:ingredients] %></p>
        <%= link_to "View all →", ingredients_path, class: "text-xs text-blue-300 hover:underline mt-2 block" %>
      </div>

      <div class="p-4 rounded-xl bg-black/70 backdrop-blur-xl border border-black/10 border-l-4 border-lime-400/70 shadow-lg shadow-black/20">
        <p class="text-xs uppercase text-green-500 font-semibold">Recipes</p>
        <p class="text-3xl font-bold text-white"><%= @stats[:recipes] %></p>
        <%= link_to "View all →", recipes_path, class: "text-xs text-green-600 hover:underline mt-2 block" %>
      </div>

      <div class="p-4 rounded-xl bg-black/70 backdrop-blur-xl border border-black/10 border-l-4 border-yellow-300 shadow-lg shadow-black/20">
        <p class="text-xs uppercase text-yellow-200 font-semibold">Inventory</p>
        <p class="text-3xl font-bold text-white"><%= @stats[:inventory] %></p>
        <%= link_to "View all →", inventory_items_path, class: "text-xs text-yellow-300 hover:underline mt-2 block" %>
      </div>

      <div class="p-4 rounded-xl bg-black/70 backdrop-blur-xl border border-black/10 border-l-4 border-purple-400/60 shadow-lg shadow-black/20">
        <p class="text-xs uppercase text-purple-200 font-semibold">Batches</p>
        <p class="text-3xl font-bold text-white"><%= @stats[:batches] %></p>
        <%= link_to "View all →", batches_path, class: "text-xs text-purple-300 hover:underline mt-2 block" %>
      </div>
  </div>


<div class="grid grid-cols-1 md:grid-cols-2 gap-12">

  <!-- Recent Recipes -->
  <div>
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-white">Recent Recipes</h2>
      <%= link_to "New Recipe", new_recipe_path, 
      class: "text-sm bg-white/40 text-blue-400 border border-blue-200 px-3 py-1 rounded-full hover:bg-white/30 shadow-lg shadow-blue/20" %>
    </div>

    <div class="rounded-xl bg-black/40 backdrop-blur-xl divide-y divide-white/10">
      <% @recent_recipes.each do |recipe| %>
        <div class="p-4 flex justify-between items-center">
          <div>
            <%= link_to recipe.title, recipe, class: "text-blue-300 hover:underline font-medium" %>
            <p class="text-xs text-gray-100"><%= recipe.product_type %></p>
          </div>
          <span class="text-sm text-white"><%= recipe.created_at.strftime("%b %d") %></span>
        </div>
      <% end %>

      <% if @recent_recipes.empty? %>
        <div class="p-8 text-center text-gray-400">No recipes yet.</div>
      <% end %>
    </div>
  </div>

  <!-- Recent Batches -->
  <div>
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-white">Recent Batches</h2>
      <%= link_to "Log Batch", new_batch_path, 
      class: "text-sm bg-white/40 text-green-500 border border-green-200 px-3 py-1 rounded-full hover:bg-white/30 shadow-lg shadow-green/20 mr-2" %>
    </div>

    <div class="rounded-xl bg-black/40 backdrop-blur-xl divide-y divide-white/10">
      <% @recent_batches.each do |batch| %>
        <div class="p-4 flex justify-between items-center">
          <div>
            <p class="font-medium text-green-100"><%= batch.recipe.title %></p>
            <p class="text-xs text-gray-100 italic"><%= batch.notes.truncate(40) if batch.notes.present? %></p>
          </div>
          <div class="text-right">
            <span class="text-sm text-white block"><%= batch.made_on.strftime("%b %d") %></span>
            <%= link_to "Details", batch, class: "text-sm text-green-300 hover:underline bold mr-3 mt-6" %>
          </div>
        </div>
      <% end %>

      <% if @recent_batches.empty? %>
        <div class="p-8 text-center text-gray-400">No batches logged yet.</div>
      <% end %>
    </div>
    </div>

  </div>
  <div class="absolute bottom-2 right-8 w-70 h-50 bg-black/30 backdrop-blur-xl 
              p-6 rounded-lg shadow-lg shadow-black/10 border border-white/40 
              flex flex-col items-center justify-center z-50">

    <h2 class="text-gray-100 font-bold text-md mb-4 drop-shadow-sm">
      Recipe Completion
    </h2>

    <div class="relative w-32 h-32">
      <!-- Colorful Ring -->
      <div class="absolute inset-0 rounded-full 
                  bg-[conic-gradient(#06b6d4_25%,#10b981_50%,#f59e0b_75%)]">
      </div>
      <div class="absolute inset-2 rounded-full bg-gradient-to-r from-yellow-50 to-white flex items-center justify-center">
        <span class="text-gray-800 font-bold text-2xl drop-shadow-sm"> 
        <%= @completion %>% </span> 
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="fixed bottom-6 left-35 -translate-x-1/2 z-50 flex flex-row gap-6">

      <!-- Add Ingredient -->
      <%= link_to new_ingredient_path, class: "group relative flex flex-col items-center" do %>
        <div class="w-12 h-12 rounded-full bg-white/30 backdrop-blur-xl shadow-lg shadow-black/10 
                    flex items-center justify-center hover:bg-white/40 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 2v6l-2 4v8h10v-8l-2-4V2H9z" />
          </svg>
        </div>

        <span class="absolute bottom-full mt-2 opacity-0 group-hover:opacity-100 
                    bg-white/80 backdrop-blur-xl text-gray-900 text-sm font-medium 
                    px-3 py-1 rounded-lg shadow transition 
                    left-1/2 -translate-x-1/2 whitespace-nowrap">
          Add Ingredient
        </span>
      <% end %>

      <!-- Record Purchase -->
      <%= link_to new_inventory_item_path, class: "group relative flex flex-col items-center" do %>
        <div class="w-12 h-12 rounded-full bg-white/30 backdrop-blur-xl shadow-lg shadow-black/10 
                    flex items-center justify-center hover:bg-white/40 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-yellow-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9m12-9l2 9m-6-9v9" />
          </svg>
        </div>

        <span class="absolute bottom-full mt-2 opacity-0 group-hover:opacity-100 
                    bg-white/80 backdrop-blur-xl text-gray-900 text-sm font-medium 
                    px-3 py-1 rounded-lg shadow transition 
                    left-1/2 -translate-x-1/2 whitespace-nowrap">
          Record Purchase
        </span>
      <% end %>

      <!-- Create Recipe -->
      <%= link_to new_recipe_path, class: "group relative flex flex-col items-center" do %>
        <div class="w-12 h-12 rounded-full bg-white/30 backdrop-blur-xl shadow-lg shadow-black/10 
                    flex items-center justify-center hover:bg-white/40 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-green-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 110 4m0-4a2 2 0 100 4m0 6v2m0-2a2 2 0 110-4m0 4a2 2 0 100-4m-6 2h12" />
          </svg>
        </div>

        <span class="absolute bottom-full mt-2 opacity-0 group-hover:opacity-100 
                    bg-white/80 backdrop-blur-xl text-gray-900 text-sm font-medium 
                    px-3 py-1 rounded-lg shadow transition 
                    left-1/2 -translate-x-1/2 whitespace-nowrap">
          Create Recipe
        </span>
      <% end %>

      <!-- Log Production -->
      <%= link_to new_batch_path, class: "group relative flex flex-col items-center" do %>
        <div class="w-12 h-12 rounded-full bg-white/30 backdrop-blur-xl shadow-lg shadow-black/10 
                    flex items-center justify-center hover:bg-white/40 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-purple-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 16V8a2 2 0 00-1-1.732l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.732l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z" />
          </svg>
        </div>

        <span class="absolute bottom-full mt-2 opacity-0 group-hover:opacity-100 
                    bg-white/80 backdrop-blur-xl text-gray-900 text-sm font-medium 
                    px-3 py-1 rounded-lg shadow transition 
                    left-1/2 -translate-x-1/2 whitespace-nowrap">
          Log Production
        </span>
      <% end %>
  </div>
</div>